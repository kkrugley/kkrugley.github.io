<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Box Nesting & Packing</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body data-bs-theme="light"> <!-- White theme -->

    <!-- Main Content Wrapper (Width, centering, flex column for vertical fill) -->
    <div class="main-content-wrapper mt-4">

        <!-- Header Section (Non-growing part) -->
        <header class="text-center mb-4 flex-shrink-0">
            <h1 class="display-5">Box Nesting & Packing</h1>
            <p class="lead">Calculate and visualize nested box dimensions and their flat layout.</p>
        </header>

        <!-- Instructions Section (Non-growing part) -->
        <section class="mb-4 card bg-light p-3 flex-shrink-0">
             <h3 class="h5">How to Use:</h3>
             <p class="small mb-0">
                 Enter the dimensions of the largest box, wall thickness, total box count, and the available layout plane size. Click "Calculate & Visualize". The program will attempt to find dimensions for all boxes so they can nest inside each other (like Russian dolls) and also fit onto the layout plane without overlapping. Results showing the box dimensions, nesting structure, and visualizations will appear below and to the right.
             </p>
        </section>


        <!-- Main Application Row (This row should grow to fill remaining height) -->
        <div class="row g-3 flex-grow-1 main-app-row">

            <!-- Left Panel: Inputs & Details -->
            <div class="col-lg-4 col-md-5">
                <!-- Flex column to manage card heights within this Bootstrap column -->
                <div class="d-flex flex-column h-100">
                    <!-- Input Card -->
                    <div class="card mb-3 flex-shrink-0"> <!-- Input card should not grow vertically -->
                        <div class="card-header">Input Parameters</div>
                        <div class="card-body">
                            <form id="inputForm">
                                <!-- Input fields remain the same -->
                                <div class="row mb-2 align-items-center"><label for="largestW" class="col-sm-6 col-form-label col-form-label-sm">Largest Box W (mm):</label><div class="col-sm-6"><input type="number" class="form-control form-control-sm" id="largestW" value="200" min="1" required></div></div>
                                <div class="row mb-2 align-items-center"><label for="largestL" class="col-sm-6 col-form-label col-form-label-sm">Largest Box L (mm):</label><div class="col-sm-6"><input type="number" class="form-control form-control-sm" id="largestL" value="150" min="1" required></div></div>
                                <div class="row mb-2 align-items-center"><label for="wallT" class="col-sm-6 col-form-label col-form-label-sm">Wall Thickness (mm):</label><div class="col-sm-6"><input type="number" class="form-control form-control-sm" id="wallT" value="5" min="0" step="0.1" required></div></div>
                                <div class="row mb-2 align-items-center"><label for="numBoxes" class="col-sm-6 col-form-label col-form-label-sm">Total # Boxes:</label><div class="col-sm-6"><input type="number" class="form-control form-control-sm" id="numBoxes" value="8" min="1" required></div></div>
                                <div class="row mb-2 align-items-center"><label for="planeW" class="col-sm-6 col-form-label col-form-label-sm">Layout Plane W (mm):</label><div class="col-sm-6"><input type="number" class="form-control form-control-sm" id="planeW" value="500" min="1" required></div></div>
                                <div class="row mb-2 align-items-center"><label for="planeL" class="col-sm-6 col-form-label col-form-label-sm">Layout Plane L (mm):</label><div class="col-sm-6"><input type="number" class="form-control form-control-sm" id="planeL" value="400" min="1" required></div></div>
                                <button type="button" class="btn btn-primary w-100 mt-3" id="calculateBtn">Calculate & Visualize</button>
                                <p id="statusLabel" class="mt-3 text-muted small mb-0">Status: Ready</p>
                            </form>
                        </div>
                    </div>

                    <!-- Details Card -->
                    <div class="card details-card flex-shrink-1"> <!-- Allow shrinking, but limited height -->
                        <div class="card-header">Box Details & Nesting</div>
                        <!-- This card body will contain the scrolling pre -->
                        <div class="card-body details-card-body p-2">
                             <pre id="detailsOutput" class="small mb-0"></pre> <!-- Pre itself doesn't scroll -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Visualizations -->
            <div class="col-lg-8 col-md-7">
                 <!-- Flex column to manage card heights -->
                 <div class="d-flex flex-column h-100">
                    <!-- Nesting Visualization Card -->
                    <div class="card mb-3 flex-grow-1"> <!-- Use flex-grow-1 -->
                        <div class="card-header">Nesting Visualization (Largest Box)</div>
                        <div class="card-body p-2">
                            <canvas id="nestingCanvas" class="vis-canvas bg-light"></canvas>
                        </div>
                    </div>
                    <!-- Layout Visualization Card -->
                    <div class="card flex-grow-1"> <!-- Use flex-grow-1 -->
                        <div class="card-header">Layout Visualization (On Plane)</div>
                        <div class="card-body p-2">
                            <canvas id="layoutCanvas" class="vis-canvas bg-secondary-subtle"></canvas>
                        </div>
                    </div>
                </div>
            </div>

        </div> <!-- /.row -->
    </div> <!-- /.main-content-wrapper -->

    <!-- Scripts remain the same -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="script.js"></script>
</body>
</html>